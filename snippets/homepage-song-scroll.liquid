<div class="song-scroll-wrapper">
  <div class="song-scroll-inner">

    <!-- Pop Romance -->
    <div class="song-card genre-pop-romance">
      <div class="song-genre">
        Pop Romance
      </div>

      <button class="song-play-btn" type="button" aria-label="Play Pop Romance">
        <span class="song-play-icon"></span>
      </button>

      <audio class="song-audio">
        <source src="{{ 'Run_to_me.mp3' | file_url }}" type="audio/mpeg">
      </audio>
    </div>

    <!-- Adult Contemporary -->
    <div class="song-card genre-adult-contemporary">
      <div class="song-genre">
        Adult Contemporary
      </div>

      <button class="song-play-btn" type="button" aria-label="Play Adult Contemporary">
        <span class="song-play-icon"></span>
      </button>

      <audio class="song-audio">
        <source src="{{ 'Just_for_Tonight_Our_Lullaby.mp3' | file_url }}" type="audio/mpeg">
      </audio>
    </div>

    <!-- Power Ballad -->
    <div class="song-card genre-power-ballad">
      <div class="song-genre">
        Power Ballad
      </div>

      <button class="song-play-btn" type="button" aria-label="Play Power Ballad">
        <span class="song-play-icon"></span>
      </button>

      <audio class="song-audio">
        <source src="{{ 'Whisper_to_me_then.mp3' | file_url }}" type="audio/mpeg">
      </audio>
    </div>

    <!-- Progressive Funk -->
    <div class="song-card genre-progressive-funk">
      <div class="song-genre">
        Progressive Funk
      </div>

      <button class="song-play-btn" type="button" aria-label="Play Progressive Funk">
        <span class="song-play-icon"></span>
      </button>

      <audio class="song-audio">
        <source src="{{ 'Eine_Kleine_Nachtmusik.mp3' | file_url }}" type="audio/mpeg">
      </audio>
    </div>

    <!-- Country -->
    <div class="song-card genre-country">
      <div class="song-genre">
        Country
      </div>

      <button class="song-play-btn" type="button" aria-label="Play Country">
        <span class="song-play-icon"></span>
      </button>

      <audio class="song-audio">
        <source src="{{ 'long_long_road.mp3' | file_url }}" type="audio/mpeg">
      </audio>
    </div>

    <!-- Dance Pop -->
    <div class="song-card genre-dance-pop">
      <div class="song-genre">
        Dance Pop
      </div>

      <button class="song-play-btn" type="button" aria-label="Play Dance Pop">
        <span class="song-play-icon"></span>
      </button>

      <audio class="song-audio">
        <source src="{{ 'pop_dance.mp3' | file_url }}" type="audio/mpeg">
      </audio>
    </div>

  </div>
</div>

<style>
  .song-scroll-wrapper {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    padding: 32px 0;
    background-color: #1a1a1a; /* Ensure dark background */
  }

  .song-scroll-inner {
    display: flex;
    gap: 16px;
    min-width: 100%;
    padding-left: 16px; /* Add some padding for the first item */
    padding-right: 16px;
  }

  .song-card {
    min-width: 230px;
    max-width: 260px;
    flex: 0 0 auto;
    border-radius: 18px;
    padding: 18px 18px 24px 18px;
    color: #000; /* Keep text black on light cards */
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: space-between;
    transition: transform 0.3s ease;
  }
  
  .song-card:hover {
    transform: translateY(-5px);
  }

  .song-genre {
    font-size: 0.8rem;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    font-weight: 600;
    margin-bottom: 16px;
    opacity: 0.85;
  }

  /* Black play button */
  .song-play-btn {
    width: 56px;
    height: 56px;
    border-radius: 999px;
    border: none;
    background: #1a1a1a;
    color: #D4AF37;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.15s ease, opacity 0.15s ease, box-shadow 0.3s ease;
  }

  .song-play-btn:hover {
    transform: translateY(-1px);
    opacity: 1;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  }

  .song-play-btn:focus-visible {
    outline: 2px solid #D4AF37;
    outline-offset: 3px;
  }

  /* Play icon (triangle) */
  .song-play-icon {
    display: block;
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 9px 0 9px 15px;
    border-color: transparent transparent transparent #D4AF37;
    margin-left: 3px;
  }

  /* Pause icon when playing */
  .song-play-btn.playing .song-play-icon {
    width: 14px;
    height: 14px;
    border: none;
    position: relative;
    margin-left: 0;
  }

  .song-play-btn.playing .song-play-icon::before,
  .song-play-btn.playing .song-play-icon::after {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    width: 4px;
    background: #D4AF37;
    border-radius: 1px;
  }

  .song-play-btn.playing .song-play-icon::before {
    left: 1px;
  }

  .song-play-btn.playing .song-play-icon::after {
    right: 1px;
  }

  /* Different background colors per genre card */
  .genre-pop-romance {
    background: linear-gradient(135deg, #ffe6f0, #fff5f9);
  }

  .genre-adult-contemporary {
    background: linear-gradient(135deg, #f2f5ff, #eef2ff);
  }

  .genre-power-ballad {
    background: linear-gradient(135deg, #fdf0e3, #ffe9cc);
  }

  .genre-progressive-funk {
    background: linear-gradient(135deg, #e9fff6, #d6f5ea);
  }

  .genre-country {
    background: linear-gradient(135deg, #fff7e6, #ffefd2);
  }

  .genre-dance-pop {
    background: linear-gradient(135deg, #f4e9ff, #efe1ff);
  }

  .song-audio {
    display: none; /* hide native controls/timer completely */
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var cards = document.querySelectorAll('.song-card');
    var currentAudio = null;
    var currentButton = null;

    cards.forEach(function (card) {
      var audio = card.querySelector('.song-audio');
      var button = card.querySelector('.song-play-btn');

      button.addEventListener('click', function () {
        // Stop any other track
        if (currentAudio && currentAudio !== audio) {
          currentAudio.pause();
          currentAudio.currentTime = 0;
          if (currentButton) {
            currentButton.classList.remove('playing');
          }
        }

        if (audio.paused) {
          audio.play();
          button.classList.add('playing');
          currentAudio = audio;
          currentButton = button;
        } else {
          audio.pause();
          audio.currentTime = 0;
          button.classList.remove('playing');
          currentAudio = null;
          currentButton = null;
        }
      });

      // If audio ends naturally, reset button state
      audio.addEventListener('ended', function () {
        button.classList.remove('playing');
        if (currentAudio === audio) {
          currentAudio = null;
          currentButton = null;
        }
      });
    });
  });
</script>
