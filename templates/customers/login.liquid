<!-- /templates/customers/login.liquid -->
{% comment %}
  Custom login page with automatic redirect to song portal after successful login
{% endcomment %}

<div class="customer login">
  <div class="container">
    <h1>{{ 'customer.login.title' | t }}</h1>
    
    {%- form 'customer_login', novalidate: 'novalidate' -%}
      {%- comment -%}
        Redirect to song portal after successful login
      {%- endcomment -%}
      <input type="hidden" name="return_to" value="/pages/song-portal">
      
      {% if form.errors %}
        <div class="form__message errors" tabindex="-1" autofocus>
          {{ form.errors | default_errors }}
        </div>
      {% endif %}

      <div class="field">
        <input
          type="email"
          name="customer[email]"
          id="CustomerEmail"
          autocomplete="email"
          autocapitalize="off"
          placeholder="{{ 'customer.login.email' | t }}"
          {% if form.errors %}
            aria-invalid="true"
            aria-describedby="CustomerEmail-error"
          {% endif %}
        >
        <label for="CustomerEmail">
          {{ 'customer.login.email' | t }}
        </label>
      </div>

      <div class="field">
        <input
          type="password"
          value=""
          name="customer[password]"
          id="CustomerPassword"
          autocomplete="current-password"
          placeholder="{{ 'customer.login.password' | t }}"
          {% if form.errors %}
            aria-invalid="true"
            aria-describedby="CustomerPassword-error"
          {% endif %}
        >
        <label for="CustomerPassword">
          {{ 'customer.login.password' | t }}
        </label>
      </div>

      <div class="login__actions">
        <button type="submit" class="button">
          {{ 'customer.login.sign_in' | t }}
        </button>
        
        <a href="{{ routes.account_recover_url }}">
          {{ 'customer.login.forgot_password' | t }}
        </a>
      </div>
    {%- endform -%}

    {% if shop.checkout.guest_login %}
      <hr>
      <div class="guest-login">
        <h2>{{ 'customer.login.guest_title' | t }}</h2>
        {%- form 'guest_login' -%}
          <button type="submit" class="button button--secondary">
            {{ 'customer.login.guest_continue' | t }}
          </button>
        {%- endform -%}
      </div>
    {% endif %}

    <div class="create-account">
      <a href="{{ routes.account_register_url }}" class="button button--secondary">
        {{ 'customer.login.create_account' | t }}
      </a>
    </div>
  </div>
</div>

<style>
  .customer.login {
    max-width: 500px;
    margin: 60px auto;
    padding: 20px;
  }
  
  .customer.login h1 {
    margin-bottom: 30px;
    text-align: center;
  }
  
  .field {
    margin-bottom: 20px;
  }
  
  .field input {
    width: 100%;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 4px;
  }
  
  .field label {
    display: block;
    margin-bottom: 5px;
    font-weight: 500;
  }
  
  .login__actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 20px;
  }
  
  .button {
    padding: 12px 24px;
    background: #D4AF37;
    color: #1a1a1a;
    border: none;
    border-radius: 4px;
    font-weight: bold;
    cursor: pointer;
  }
  
  .button:hover {
    background: #C5A028;
  }
  
  .button--secondary {
    background: transparent;
    border: 2px solid #D4AF37;
    color: #D4AF37;
  }
  
  .create-account {
    margin-top: 30px;
    text-align: center;
  }
  
  hr {
    margin: 30px 0;
    border: none;
    border-top: 1px solid #ddd;
  }
  
  .guest-login {
    text-align: center;
  }
  
  .form__message.errors {
    background: #fff3cd;
    color: #856404;
    padding: 12px;
    border-radius: 4px;
    margin-bottom: 20px;
  }
</style>
